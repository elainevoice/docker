version: '3.8'
services:
    proxy:
        image: nginx:alpine
        volumes:
            - ./configuration/nginx.conf:/etc/nginx/nginx.conf
        ports:
            - '80:80'
        depends_on:
            - frontend
            - backend
        tty: true
        networks:
            - frontend
            - backend

    frontend:
        image: scratch
        networks:
            - frontend

    backend:
        build: 
            context: ./backend
            target: production_stage
        volumes:
            - ./backend:/app
        expose:
            - 80
        networks:
            - backend
networks:
    frontend:
    backend:
