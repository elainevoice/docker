version: '3.8'
services:
    proxy:
        build: 
          context: ./frontend
          target: production_stage
        environment:
            - NODE_ENV=production
        volumes:
            - ./configuration/nginx.conf:/etc/nginx/nginx.conf
        tty: true
        ports:
            - 80:80
        networks:
            - frontend
        environment: 
            - REACT_APP_API=$API_ENDPOINT
        depends_on: 
            - backend
networks:
    frontend: